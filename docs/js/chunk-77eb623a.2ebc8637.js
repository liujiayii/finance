(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77eb623a"],{"268f":function(t,e,a){t.exports=a("fde4")},"32a6":function(t,e,a){var o=a("241e"),l=a("c3a1");a("ce7e")("keys",function(){return function(t){return l(o(t))}})},"454f":function(t,e,a){a("46a7");var o=a("584a").Object;t.exports=function(t,e,a){return o.defineProperty(t,e,a)}},"46a7":function(t,e,a){var o=a("63b6");o(o.S+o.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},7935:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{"modal-append-to-body":!1,visible:t.dialogFormVisible,fullscreen:""},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.closeDialog}},[a("el-form",{attrs:{model:t.formData,inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"报销单类型"}},[a("el-select",{attrs:{disabled:Boolean(t.formData.id)},model:{value:t.formData.expenseAccountType,callback:function(e){t.$set(t.formData,"expenseAccountType",e)},expression:"formData.expenseAccountType"}},[a("el-option",{attrs:{label:"新标续贷报销单",value:1}}),a("el-option",{attrs:{label:"本息报销单",value:2}})],1)],1),2===t.formData.expenseAccountType?[a("el-form-item",{attrs:{label:"还款期数"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData.allottedTime,callback:function(e){t.$set(t.formData,"allottedTime",e)},expression:"formData.allottedTime"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("个月")])])],1),a("el-form-item",{attrs:{label:"类别"}},[a("el-select",{model:{value:t.formData.interestType,callback:function(e){t.$set(t.formData,"interestType",e)},expression:"formData.interestType"}},[a("el-option",{attrs:{label:"续贷还平台",value:1}}),a("el-option",{attrs:{label:"到期还平台",value:2}}),a("el-option",{attrs:{label:"提前还平台",value:3}}),a("el-option",{attrs:{label:"逾期还平台",value:4}})],1)],1)]:t._e(),a("el-form-item",{attrs:{label:"所属公司"}},[a("el-select",{model:{value:t.formData.companyName,callback:function(e){t.$set(t.formData,"companyName",e)},expression:"formData.companyName"}},t._l(t.companyList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),1===t.formData.expenseAccountType?[!t.formData.id||t.formData["平台服务费+利息"]?a("el-form-item",{attrs:{label:"平台服务费+利息"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["平台服务费+利息"],callback:function(e){t.$set(t.formData,"平台服务费+利息",e)},expression:"formData['平台服务费+利息']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["点位费"]?a("el-form-item",{attrs:{label:"点位费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["点位费"],callback:function(e){t.$set(t.formData,"点位费",e)},expression:"formData['点位费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["房产"]?a("el-form-item",{attrs:{label:"房产"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["房产"],callback:function(e){t.$set(t.formData,"房产",e)},expression:"formData['房产']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["档案管理"]?a("el-form-item",{attrs:{label:"档案管理"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["档案管理"],callback:function(e){t.$set(t.formData,"档案管理",e)},expression:"formData['档案管理']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["垫资费"]?a("el-form-item",{attrs:{label:"垫资费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["垫资费"],callback:function(e){t.$set(t.formData,"垫资费",e)},expression:"formData['垫资费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["过账费"]?a("el-form-item",{attrs:{label:"过账费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["过账费"],callback:function(e){t.$set(t.formData,"过账费",e)},expression:"formData['过账费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["实地费"]?a("el-form-item",{attrs:{label:"实地费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["实地费"],callback:function(e){t.$set(t.formData,"实地费",e)},expression:"formData['实地费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["GPS安装"]?a("el-form-item",{attrs:{label:"GPS安装"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["GPS安装"],callback:function(e){t.$set(t.formData,"GPS安装",e)},expression:"formData['GPS安装']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["停车费"]?a("el-form-item",{attrs:{label:"停车费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["停车费"],callback:function(e){t.$set(t.formData,"停车费",e)},expression:"formData['停车费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["进抵费"]?a("el-form-item",{attrs:{label:"进抵费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["进抵费"],callback:function(e){t.$set(t.formData,"进抵费",e)},expression:"formData['进抵费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["查档费"]?a("el-form-item",{attrs:{label:"查档费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["查档费"],callback:function(e){t.$set(t.formData,"查档费",e)},expression:"formData['查档费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["他项费"]?a("el-form-item",{attrs:{label:"他项费"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["他项费"],callback:function(e){t.$set(t.formData,"他项费",e)},expression:"formData['他项费']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e()]:t._e(),2===t.formData.expenseAccountType?[!t.formData.id||t.formData["本金"]?a("el-form-item",{attrs:{label:"本金"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["本金"],callback:function(e){t.$set(t.formData,"本金",e)},expression:"formData['本金']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["利息"]?a("el-form-item",{attrs:{label:"利息"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["利息"],callback:function(e){t.$set(t.formData,"利息",e)},expression:"formData['利息']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e(),!t.formData.id||t.formData["违约金"]?a("el-form-item",{attrs:{label:"违约金"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.formData["违约金"],callback:function(e){t.$set(t.formData,"违约金",e)},expression:"formData['违约金']"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("元")])])],1):t._e()]:t._e(),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],2),a("el-upload",{attrs:{action:"/insertImg","list-type":"picture-card","file-list":t.fileList,"on-success":t.handleSuccess,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogImageVisible},on:{"update:visible":function(e){t.dialogImageVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("p",[t._v("当前总计："+t._s(t.totalMoney)+"元")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("1")}}},[t._v("保 存")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("2")}}},[t._v("提 交")])],1)],1),a("div",{staticClass:"top"},[a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新建报销单")]),a("p",[t._v("新标标号："+t._s(t.topDetail.id)+" 业务员："+t._s(t.topDetail.username)+" 标类型："+t._s(1===t.topDetail.businessType?"新标":"续贷"))])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"报销单ID"}}),a("el-table-column",{attrs:{prop:"expenseAccountType",label:"报销单类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.expenseAccountType?"新标续贷报销单":"本息报销单"))])]}}])}),a("el-table-column",{attrs:{prop:"expenseAccountState",label:"报销单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.expenseAccountState?"草稿":2===e.row.expenseAccountState?"未审核":3===e.row.expenseAccountState?"已审核":"已驳回"))])]}}])}),a("el-table-column",{attrs:{prop:"expenseAccountMoney",label:"报销总金额"}}),a("el-table-column",{attrs:{prop:"dateCreated",label:"创建日期",formatter:t.formatter}}),a("el-table-column",{attrs:{prop:"allottedTime",label:"还款期数"}}),a("el-table-column",{attrs:{prop:"printNumber",label:"已打印次数"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)},l=[],r=a("cebc"),n=(a("28a5"),a("7f7f"),a("f4e6")),s={name:"targetListDetail",data:function(){return{tableData:[],pagination:{},loading:!1,topDetail:{},dialogFormVisible:!1,formData:{},companyList:[],dialogImageUrl:"",dialogImageVisible:!1,fileList:[]}},methods:{closeDialog:function(){this.formData={},this.fileList=[]},formatter:function(t,e,a,o){return Object(n["a"])(new Date(a),"yyyy-MM-dd")},handleClick:function(t){var e=this;this.dialogFormVisible=!0,this.$ajax.post("/listByExpenseAccountId",{id:t.id}).then(function(a){if(1===a.data.code){for(var o={},l=0;l<a.data.data.length;l++)o[a.data.data[l].name]=a.data.data[l].money;for(var n=[],s=0;s<t.imageUrl.split(",").length;s++)""!==t.imageUrl.split(",")[s]&&n.push({name:s,url:t.imageUrl.split(",")[s]});e.fileList=n,e.formData=JSON.parse(JSON.stringify(Object(r["a"])({},t,o)))}})},handleDelete:function(t){var e=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax.post("/deleteExpenseAccount",t).then(function(t){1===t.data.code&&(e.$message.success(t.data.msg),e.fetch(e.pagination.current))})}).catch(function(){e.$message.info("已取消")})},submit:function(t){var e=this;delete this.formData.dateCreated,delete this.formData.lastModifiedTime;var a=[];for(var o in this.formData)/^[a-zA-Z]*$/.test(o)||(a.push({name:o,money:this.formData[o]}),delete this.formData[o]);for(var l="",n=0;n<this.fileList.length;n++)l+=(0===n?"":",")+(this.fileList[n].response||this.fileList[n].url);this.formData.imageUrl=l,console.log(a),this.$ajax.post(this.formData.id?"/updateExpenseAccount":"/insertExpenseAccount",Object(r["a"])({superscriptId:this.$route.query.id,expenseAccountState:t},this.formData,{ExpenseProjectParticulars:JSON.stringify(a)})).then(function(t){1===t.data.code&&(e.dialogFormVisible=!1,e.$message.success(t.data.msg),e.fetch(e.pagination.current))})},fetch:function(t){var e=this;this.loading=!0,this.$ajax.post("/listExpenseAccountXXX",{limit:10,page:t||1,superscriptId:this.$route.query.id}).then(function(a){if(1===a.data.code){var o=Object(r["a"])({},e.pagination);o.total=a.data.count,o.current=t,e.loading=!1,e.tableData=a.data.data,e.pagination=o}})},getTopDetail:function(){var t=this;this.$ajax.post("/getSuperscript",{id:this.$route.query.id}).then(function(e){1===e.data.code&&(t.topDetail=e.data.data)})},getCompany:function(){var t=this;this.$ajax.post("/t_branch_company/selectCompanyName").then(function(e){1===e.data.code&&(t.companyList=e.data.data)})},handleRemove:function(t,e){this.fileList=e,console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogImageVisible=!0},handleSuccess:function(t,e,a){console.log(a),this.fileList=a}},computed:{totalMoney:function(){var t=0;for(var e in this.formData)/^[a-zA-Z]*$/.test(e)||(t+=1*this.formData[e]);return t}},mounted:function(){this.fetch(),this.getTopDetail(),this.getCompany()}},i=s,f=a("2877"),u=Object(f["a"])(i,o,l,!1,null,"5ca8bd12",null);e["default"]=u.exports},"85f2":function(t,e,a){t.exports=a("454f")},"8aae":function(t,e,a){a("32a6"),t.exports=a("584a").Object.keys},a4bb:function(t,e,a){t.exports=a("8aae")},bf90:function(t,e,a){var o=a("36c3"),l=a("bf0b").f;a("ce7e")("getOwnPropertyDescriptor",function(){return function(t,e){return l(o(t),e)}})},ce7e:function(t,e,a){var o=a("63b6"),l=a("584a"),r=a("294c");t.exports=function(t,e){var a=(l.Object||{})[t]||Object[t],n={};n[t]=e(a),o(o.S+o.F*r(function(){a(1)}),"Object",n)}},cebc:function(t,e,a){"use strict";var o=a("268f"),l=a.n(o),r=a("e265"),n=a.n(r),s=a("a4bb"),i=a.n(s),f=a("85f2"),u=a.n(f);function c(t,e,a){return e in t?u()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},o=i()(a);"function"===typeof n.a&&(o=o.concat(n()(a).filter(function(t){return l()(a,t).enumerable}))),o.forEach(function(e){c(t,e,a[e])})}return t}a.d(e,"a",function(){return m})},e265:function(t,e,a){t.exports=a("ed33")},ed33:function(t,e,a){a("014b"),t.exports=a("584a").Object.getOwnPropertySymbols},fde4:function(t,e,a){a("bf90");var o=a("584a").Object;t.exports=function(t,e){return o.getOwnPropertyDescriptor(t,e)}}}]);