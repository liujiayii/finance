(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c54fb50"],{"268f":function(e,t,a){e.exports=a("fde4")},"32a6":function(e,t,a){var o=a("241e"),r=a("c3a1");a("ce7e")("keys",function(){return function(e){return r(o(e))}})},"454f":function(e,t,a){a("46a7");var o=a("584a").Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},"46a7":function(e,t,a){var o=a("63b6");o(o.S+o.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"85f2":function(e,t,a){e.exports=a("454f")},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},a4bb:function(e,t,a){e.exports=a("8aae")},b979:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"top"},[a("el-form",{attrs:{inline:!0,model:e.searchForm,size:"small"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:e.searchForm.state,callback:function(t){e.$set(e.searchForm,"state",t)},expression:"searchForm.state"}},[a("el-option",{attrs:{label:"正常",value:1}}),a("el-option",{attrs:{label:"锁定",value:2}})],1)],1),a("el-form-item",{attrs:{label:"分公司"}},[a("el-select",{model:{value:e.searchForm.companyId,callback:function(t){e.$set(e.searchForm,"companyId",t)},expression:"searchForm.companyId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.companyName,value:e.id}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fetch()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加用户")])],1),a("el-dialog",{attrs:{"modal-append-to-body":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:function(t){e.formData={}}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.formData,rules:e.rules,inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"登录账户",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off",disabled:Boolean(e.formData.id)},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),e.formData.id?e._e():a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),a("el-form-item",{attrs:{label:"账号状态",prop:"state"}},[a("el-select",{model:{value:e.formData.state,callback:function(t){e.$set(e.formData,"state",t)},expression:"formData.state"}},[a("el-option",{attrs:{label:"正常",value:1}}),a("el-option",{attrs:{label:"锁定",value:2}})],1)],1),a("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[a("el-select",{model:{value:e.formData.role_id,callback:function(t){e.$set(e.formData,"role_id",t)},expression:"formData.role_id"}},e._l(e.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{autocomplete:"off",maxlength:11},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.age,callback:function(t){e.$set(e.formData,"age",t)},expression:"formData.age"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{model:{value:e.formData.sex,callback:function(t){e.$set(e.formData,"sex",t)},expression:"formData.sex"}},[a("el-option",{attrs:{label:"女",value:0}}),a("el-option",{attrs:{label:"男",value:1}})],1)],1),a("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[a("el-select",{model:{value:e.formData.companyId,callback:function(t){e.$set(e.formData,"companyId",t)},expression:"formData.companyId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.companyName,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("ruleForm")}}},[e._v("提 交")])],1)],1),a("el-dialog",{attrs:{"modal-append-to-body":!1,visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t},closed:function(t){e.formData2={}}}},[a("el-form",{ref:"ruleForm2",attrs:{model:e.formData2,rules:e.rules,inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"登录账户",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.formData2.username,callback:function(t){e.$set(e.formData2,"username",t)},expression:"formData2.username"}})],1),a("el-form-item",{attrs:{label:"旧密码",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData2.password,callback:function(t){e.$set(e.formData2,"password",t)},expression:"formData2.password"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newpassword"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData2.newpassword,callback:function(t){e.$set(e.formData2,"newpassword",t)},expression:"formData2.newpassword"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit2("ruleForm2")}}},[e._v("提 交")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,loading:e.loading}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),a("el-table-column",{attrs:{prop:"username",label:"账号"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{label:"账户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:1===t.row.state,"active-text":"锁定","inactive-text":"正常"},on:{change:function(a){return e.updateState(t.row)}}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handlePassword(t.row)}}},[e._v("密码")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagination.current,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"current-change":e.fetch}})],1)},r=[],n=a("cebc"),l={name:"user",data:function(){return{tableData:[],pagination:{},loading:!1,searchForm:{},dialogFormVisible:!1,dialogFormVisible2:!1,formData:{},formData2:{},companyList:[],roleList:[],rules:{username:[{required:!0,message:"请输入内容",trigger:"blur"}],password:[{required:!0,message:"请输入内容",trigger:"blur"}],newpassword:[{required:!0,message:"请输入内容",trigger:"blur"}],state:[{required:!0,message:"请输入内容",trigger:"blur"}],role_id:[{required:!0,message:"请输入内容",trigger:"blur"}],name:[{required:!0,message:"请输入内容",trigger:"blur"}],phone:[{required:!0,message:"请输入内容",trigger:"blur"}],age:[{required:!0,message:"请输入内容",trigger:"blur"}],sex:[{required:!0,message:"请输入内容",trigger:"blur"}],companyId:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},methods:{reset:function(){this.searchForm={},this.fetch()},handleClick:function(e){this.dialogFormVisible=!0,this.formData=JSON.parse(JSON.stringify(e))},handlePassword:function(e){this.dialogFormVisible2=!0,this.formData2=JSON.parse(JSON.stringify({username:e.username,id:e.id}))},submit2:function(e){var t=this;this.$refs[e].validate(function(e){if(e)return t.formData.id&&delete t.formData.password,t.$ajax.post("/uatepassword",t.formData2).then(function(e){1===e.data.code&&(t.dialogFormVisible2=!1,t.$message.success(e.data.msg))}),!1})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e)return delete t.formData.createTime,delete t.formData.birthday,t.formData.id&&delete t.formData.password,t.$ajax.post(t.formData.id?"/updateusersert":"/adduser",t.formData).then(function(e){1===e.data.code&&(t.dialogFormVisible=!1,t.$message.success(e.data.msg),t.fetch(t.pagination.current))}),!1})},fetch:function(e){var t=this;this.loading=!0,this.$ajax.post("/selectuserserlist",Object(n["a"])({limit:10,page:e||1},this.searchForm)).then(function(a){if(1===a.data.code){var o=Object(n["a"])({},t.pagination);o.total=a.data.count,o.current=e,t.loading=!1,t.tableData=a.data.data,t.pagination=o}})},handleDelete:function(e){var t=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.post("/delectuser",e).then(function(e){1===e.data.code&&(t.$message.success(e.data.msg),t.fetch(t.pagination.current))})}).catch(function(){t.$message.info("已取消")})},updateState:function(e){var t=this;this.$ajax.post("/updateuserserts",{id:e.id,state:1===e.state?2:1}).then(function(e){1===e.data.code&&(t.$message.success(e.data.msg),t.fetch(t.pagination.current))})},getCompany:function(){var e=this;this.$ajax.post("/t_branch_company/selectt_branch_company",{page:1,limit:100}).then(function(t){1===t.data.code&&(e.companyList=t.data.data)})},getAllRole:function(){var e=this;this.$ajax.post("/listRole",{page:1,limit:100}).then(function(t){1===t.data.code&&(e.roleList=t.data.data)})}},mounted:function(){this.fetch(),this.getCompany(),this.getAllRole()}},s=l,i=a("2877"),c=Object(i["a"])(s,o,r,!1,null,"2e0d8086",null);t["default"]=c.exports},bf90:function(e,t,a){var o=a("36c3"),r=a("bf0b").f;a("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return r(o(e),t)}})},ce7e:function(e,t,a){var o=a("63b6"),r=a("584a"),n=a("294c");e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],l={};l[e]=t(a),o(o.S+o.F*n(function(){a(1)}),"Object",l)}},cebc:function(e,t,a){"use strict";var o=a("268f"),r=a.n(o),n=a("e265"),l=a.n(n),s=a("a4bb"),i=a.n(s),c=a("85f2"),u=a.n(c);function m(e,t,a){return t in e?u()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},o=i()(a);"function"===typeof l.a&&(o=o.concat(l()(a).filter(function(e){return r()(a,e).enumerable}))),o.forEach(function(t){m(e,t,a[t])})}return e}a.d(t,"a",function(){return f})},e265:function(e,t,a){e.exports=a("ed33")},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols},fde4:function(e,t,a){a("bf90");var o=a("584a").Object;e.exports=function(e,t){return o.getOwnPropertyDescriptor(e,t)}}}]);